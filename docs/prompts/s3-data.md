# s3-data 示例数据生成

主要工作：

1. 生成示例数据
2. 数据统一管理
3. 接口模拟

主要成果：

1. 示例数据
2. 接口清单
3. 这个阶段主要Prompt


## 1.5 生成示例数据

### Prompt

```
请先管理好上下文：
1. 仔细阅读 @original_requirements 中的原始功能需求；
2. 仔细阅读 @functional 中的功能需求设计；
3. 仔细阅读 @app 各个功能模块的实现，以及 @components 中的组件实现；
4. 仔细阅读 目前 @mocks @api 中的数据规则、接口模拟实现；

在以上基础上，生成系统中全部功能的示例数据与接口清单。请注意：
- 示例数据要尽可能覆盖全部功能，不要遗漏。
- 示例数据要尽可能符合实际，不要过于简单或复杂。
- 示例数据要尽可能符合业务逻辑，不要违反业务规则。
- 示例数据、接口清单要进行统一管理，在 @mocks @api 中进行管理。
- 接口清单要尽可能详细，包括请求参数、返回数据，并使用注释说明，以及被哪些功能使用等。
- 示例数据要尽可能详细，包括各个字段的值等，并使用注释说明，以及被哪些功能使用等。
```


**AI-Assistant**

```
coding...
```


**Prompt-Reviewer**

```
请阅读代码，告诉 我 @api 目录 和 @mocks  目前存在哪些关系？是否合理？目前的这种 模拟数据接口的方式是否存在性能问题
```

**AI-Assistant**

```
让我分析一下当前的实现方式：
1. 目录结构关系
src/
  ├── app/
  │   └── api/                 # Next.js API 路由
  │       ├── laboratory/      # 实验室相关 API
  │       ├── quarantine-organizations/ # 检疫机构相关 API
  │       └── enterprises/     # 企业相关 API
  └── mocks/                   # 模拟数据
      ├── data/               # 模拟数据定义和存储
      └── handlers/          # API 请求处理器
2. 存在的问题
    1. 数据一致性问题
        - @api 和 @mocks 是两套独立的实现
        - 可能导致接口定义不一致
        - 类型定义可能出现差异
        - 维护成本高
    2. 性能隐患
        - 当前的模拟数据全部存储在内存中
        - 数据量大时会占用较多内存
        - 每次请求都要遍历数组进行过滤
        - 没有分页机制，可能返回大量数据
    3. 开发效率问题
        - 需要同时维护两套代码
        - 切换真实/模拟环境可能需要修改代码
        - 模拟数据与真实数据可能不同步
3. 建议的改进方案
    1. 统一接口定义
    2. 优化模拟数据存储
    3. 统一错误处理
    4. 环境配置优化
    5. 添加数据验证
4. 性能优化建议
    1. 分页处理
        - 所有列表接口必须支持分页
        - 默认限制每页数量
        - 支持游标分页
    2. 缓存机制
        - 添加内存缓存层
        - 支持条件缓存
        - 缓存自动失效
    3. 数据索引
        - 为常用查询字段建立索引
        - 优化查询性能
        - 支持复合索引
    4. 延迟加载
        - 支持字段过滤
        - 关联数据延迟加载
        - 大数据量分批处理
    5. 数据压缩
        - 启用 gzip 压缩
        - 减少传输数据量
        - 优化网络性能
这样的改进可以：
提高代码质量和可维护性
优化性能和资源使用
提供更好的开发体验
保持数据一致性
更接近生产环境
是否需要我详细说明某个具体的改进点？
```


**Prompt-Reviewer**

```
请将这些部分全部实现，确保：
1、页面与组件 使用数据仅依赖于 @api ；
2. @api 中调用 的数据仅依赖于 @mocks 中的数据；
3. 移除 @mocks 中不必要的功能，仅作模拟后端数据来使用。
```



