
# s2-page 界面设计阶段

根据功能需求，生成界面设计。

主要成果：
- **初版界面**
- **生成界面Prompt**

通过 `$ npm run dev` 运行项目，可以看到初版界面。

## 1.3 生成界面结构

### Prompt

```
依据 @index.md 中“### 1. 使用界面来确认需求”的基本流程，目前我们已经完成了 `s1-face` 阶段，现在马上开始 `s2-page` 阶段。在这个阶段，我们将依据功能需求，最终生成全部前端界面。你（AI-Assistant）将负责全部界面的设计、开发、用户体验优化等工作，我（Prompt-Review）将负责评审、优化Prompt来告诉你如何更加准确地达到效果。那么我们开始。
请根据 @index.md 中的所有功能，逐个生成界面。开始之前需要知道的信息和注意事项：
- 请参考 radix-ui 中的设计规范进行设计。
- 开发工作相关技术要求请参照 @.cursorrules 中的描述。
- 合理组织 @src 目录下的文件结构，确保代码可读性。
- 代码注释要完整、准确、规范，特别是函数和组件的注释。
- 每个组件要确保可复用地进行设计，同时，在开发之前，检阅组件库中是否包含了复用组件。
- 开发仅关注前端界面设计、交互逻辑实现，不关注后端逻辑，接口数据由统一模拟实现。
- 首先创建首页、顶部导航栏、左侧边栏导航、底部导航栏等全局组件，以及必要的基础组件。再将全部页面生成成包含共有部分的空白页，经我确认后，再逐个生成页面细节。
- 先建立代码功能框架，再逐个实现页面功能。
- 当遇到问题反复尝试无果时，请及时向我求助，不要为了达成目的使用不理想的方案。
- 在生成界面时，解决Linter错误，确保代码规范。无法解决必要使用 `ignore` 注释时，必须先经过我同意。
- 在进行样式设计的调整时，请更新相应组件的样式，确保样式的一致性。
```

### Logs

**AI-Assistant**

```
coding...

现在我们已经创建了所有页面的基本结构。每个页面都遵循相同的布局模式:
页面标题
内容区域使用 Card 组件包裹
统一的间距和样式
接下来我们可以开始逐个实现每个页面的具体功能。我们应该从哪个页面开始?
```

**Prompt-Review**

```
请先暂停，将你创建的这些页面路径，记录到 @functional 目录下相应的功能说明中去，以便可以将功能需求与界面实现相对应。
```

**AI-Assistant**

```
我明白您的需求。我需要将已创建的页面路径添加到功能需求文档中，建立需求和实现的对应关系。让我来更新相应的文档。

docing...

我已经将所有创建的页面路径信息添加到相应的功能需求文档中。现在每个功能模块的文档都包含了对应的页面路径信息，包括：
企业管理模块 (docs/requirements/functional/business/enterprise.md)
企业信息页面 /enterprises
引种记录页面 /enterprises/imports
隔离试种模块 (docs/requirements/functional/business/isolation.md)
样品接收页面 /isolation/samples
试种管理页面 /isolation/plants
检疫处理页面 /isolation/quarantine
实验室检验模块 (docs/requirements/functional/business/laboratory.md)
检验任务页面 /laboratory/tasks
检验结果页面 /laboratory/results
表单管理模块 (docs/requirements/functional/business/forms.md)
表单模板页面 /forms/templates
表单记录页面 /forms/records
数据分析模块 (docs/requirements/functional/analysis/index.md)
统计报表页面 /analysis/statistics
数据导出页面 /analysis/export
系统管理模块 (docs/requirements/functional/system/index.md)
用户管理页面 /settings/users
角色权限页面 /settings/roles
基础数据页面 /settings/base-data
每个页面路径信息都包含了：
路径 URL
对应的源代码文件位置
主要功能说明
这样的文档结构可以帮助我们：
清晰地看到需求和实现的对应关系
方便后续开发和维护
便于团队成员理解系统结构
接下来我们可以开始实现具体的页面功能了。您觉得应该从哪个模块开始？
```

**Prompt-Review**

```
请再检查一遍所有的页面和功能是否都有对应
```


**AI-Assistant**

```
……
```

**Prompt-Review**

```
更新侧边栏导航，确保全部页面路由正常。
```

**AI-Assistant**

```
……
现在所有页面都可以通过侧边栏导航访问。接下来我们可以开始实现具体的页面功能了。建议从核心业务流程开始，按照以下顺序实现：
企业管理 - 因为这是数据源头
检疫机构 - 因为这是业务执行主体
隔离试种 - 核心业务流程
实验室检验 - 配套业务流程
表单管理 - 业务记录支持
数据分析 - 数据统计和导出
系统设置 - 基础支持功能
您觉得这个实现顺序合适吗？或者您有其他的优先级考虑？
```

**Prompt-Review**

```
npm run dev 预览页面效果
```

**AI-Assistant**

```
好的，我来帮您启动开发服务器预览页面效果。
$ npm run dev
```

**Prompt-Review**

```
我发现两个问题：
1. 面包屑导航的位置不对，且名称使用的路径名，并没有使用菜单名。
2. 左侧边栏“首页”链接无效。
```

**AI-Assistant**

```
……
```

**Prompt-Review**

```
请检查全局样式与 radix-ui 的风格一致性
```

**后续将发生一系列问题，只能够逐个解决**

## 1.4 逐个界面生成

### Prompt

```
请根据 @index.md 中的所有功能，逐个生成界面。开始之前需要知道的信息和注意事项：
- 请参考 radix-ui 中的设计规范进行设计。
- 开发工作相关技术要求请参照 @.cursorrules 中的描述。
- 合理组织 @src 目录下的文件结构，确保代码可读性。
- 代码注释要完整、准确、规范，特别是函数和组件的注释。
- 每个组件要确保可复用地进行设计，同时，在开发之前，检阅组件库中是否包含了复用组件。
- 开发仅关注前端界面设计、交互逻辑实现，不关注后端逻辑，接口数据由统一模拟实现。
- 首先创建首页、顶部导航栏、左侧边栏导航、底部导航栏等全局组件，以及必要的基础组件。再将全部页面生成成包含共有部分的空白页，经我确认后，再逐个生成页面细节。
- 先建立代码功能框架，再逐个实现页面功能。
- 当遇到问题反复尝试无果时，请及时向我求助，不要为了达成目的使用不理想的方案。
- 在生成界面时，解决Linter错误，确保代码规范。无法解决必要使用 `ignore` 注释时，必须先经过我同意。
- 在进行样式设计的调整时，请更新相应组件的样式，确保样式的一致性。
- 当对通用组件进行调整时，要考虑兼容性，不要进行破坏性调整，因为其它功能可能有使用到它。
```

### Logs

**AI-Assistant**

```
好的，我理解您的要求。让我们按照以下步骤进行开发：
[code]
首先，我们需要检查和整理项目的基础结构：
[code]
现在让我们创建必要的目录结构：
[code]
接下来，让我们创建一个共享的类型定义文件：
[code]
接下来，让我们创建一个工具函数文件：
[code]
现在，让我们创建一个共享的 hooks 文件：
[code]
接下来创建一个通用的数据加载 hook：
[code]
现在，让我们创建一个共享的错误边界组件：
[code]
接下来创建加载动画组件：
[code]
最后创建空状态组件：
[code]
现在我们已经创建了基础的项目结构和共享组件。接下来我们需要：
1. 创建通用业务组件（如 DataTable、SearchForm 等）
2. 创建各个业务模块的页面功能框架
3. 实现具体的业务功能
您想先从哪个部分开始？我建议按照以下顺序：
先完成通用业务组件，因为这些组件会在多个页面中使用
然后创建所有页面的基础框架，确保路由和布局正常
最后逐个实现具体的业务功能
您觉得这个计划如何？我们可以先从哪个部分开始？
```

**Prompt-Review**

```
创建通用业务组件（如 DataTable、SearchForm 等）
```

**AI-Assistant**

```
……
coding……

现在我们已经完成了所有业务模块的页面框架：
1. 企业管理模块
企业信息页面
引种记录页面
2. 检疫机构模块
机构信息页面
检疫人员页面
3. 隔离试种模块
样品接收页面
试种管理页面
检疫处理页面
4. 实验室检验模块
检验任务页面
检验结果页面
5. 表单管理模块
表单模板页面
表单记录页面
6. 数据分析模块
统计报表页面
数据导出页面
接下来，我们应该：
1. 实现各个页面的新增/编辑表单
2. 实现数据的 CRUD 操作
3. 添加权限控制
4. 添加单元测试
5. 添加错误处理
6. 优化性能
您想从哪个部分开始？
```


**Prompt-Review**

```
现在，开始绘制、开发页面上的主要功能：
从“企业信息”功能页面开始，请先查阅需求文档 @enterprise.md ，确保页面上的功能设计符合需求，确保没有过度设计、没有缺失功能。需要注意的地方：
- 逐个检查用户故事，确保用户能够通过操作得到想要的结果。
- 页面顶部有说明性文字，简要表达该功能主要用途。
- 每个页面上的功能不能只是表格筛选和增删改，要依据用户使用的场景故事，有更丰富的元素、不同的布局。
- 用户所需要的数据项有无缺失。
- 表单填写时，输入组件设计以用户体验为导向，有更好的操作体验。
- 不在页面设计开发时添加其它功能已有的部分，如需要，通过功能跳转的方式进行。
- 组件尽量使用radix-ui原生组件，必要时可自定义，在 @components 目录下开成有效复用，避免重复定义。非必要不引入其它第三方组件。
- 修改样式时，统一在 @globals.css 中定义类，非必要，不在页面中单独写css样式。
- 逐个实现页面上的交互功能，涉及与后台交互的，都通过模拟接口的方式实现。
- 非必要不要修改 tsconfig.json 中 "target" 的配置。
- 涉及到修改公共组件、项目配置时，请确保不会影响其它功能运行。
- 请不要考虑测试，先完善功能。
```

**Prompt-Review**

```
请回顾一下我们还有哪几个功能没有实现，并与需求文档 @enterprise.md 中的功能进行对比，确保没有过度设计、没有缺失功能，然后记下来。
先行处理目前遇到的运行时问题：
Unhandled Runtime Error
Error: `Tooltip` must be used within `TooltipProvider`

处理完成后继续。
```

**比对功能要反复重试！**

**AI-Assistant**

```
让我们先回顾一下待实现的功能：
✅ 企业详情查看功能
✅ 批量导入功能
3. ✅ 企业数据同步状态显示
✅ 企业操作日志记录
⬜ 企业数据统计和分析
企业数量统计
地区分布分析
引种数量趋势
检疫结果分析
⬜ 企业数据导出格式定制
自定义导出字段
导出格式选择
导出历史记录
⬜ 企业标签管理
自定义标签
批量标签操作
标签筛选
现在让我们解决 Tooltip 的运行时错误。我们需要在应用的根组件中添加 TooltipProvider。让我们修改 src/app/layout.tsx：
```

**Prompt-Review**

```
请回顾一下我们还有哪几个功能没有实现，并与需求文档 @enterprise.md 中的功能进行对比，确保没有过度设计、没有缺失功能，然后继续。需要注意的地方：
- 逐个检查用户故事，确保用户能够通过操作得到想要的结果。
- 页面顶部有说明性文字，简要表达该功能主要用途。
- 每个页面上的功能不能只是表格筛选和增删改，要依据用户使用的场景故事，有更丰富的元素、不同的布局。
- 用户所需要的数据项有无缺失。
- 表单填写时，输入组件设计以用户体验为导向，有更好的操作体验。
- 不在页面设计开发时添加其它功能已有的部分，如需要，通过功能跳转的方式进行。
- 组件尽量使用radix-ui原生组件，必要时可自定义，在 @components 目录下开成有效复用，避免重复定义。非必要不引入其它第三方组件。
- 修改样式时，统一在 @globals.css 中定义类，非必要，不在页面中单独写css样式。
- 逐个实现页面上的交互功能，涉及与后台交互的，都通过模拟接口的方式实现。
- 非必要不要修改 tsconfig.json 中 "target" 的配置。
- 涉及到修改公共组件、项目配置时，请确保不会影响其它功能运行。
- 请不要考虑测试，先完善功能。
```


**Prompt-Review**

```
继续实现 “检疫机构管理” 功能相关页面，请先查阅需求文档 @quarantine.md ，确保页面上的功能设计符合需求，确保没有过度设计、没有缺失功能。需要注意的地方：
- 逐个检查用户故事，确保用户能够通过操作得到想要的结果。
- 页面顶部有说明性文字，简要表达该功能主要用途。
- 每个页面上的功能不能只是表格筛选和增删改，要依据用户使用的场景故事，有更丰富的元素、不同的布局。
- 用户所需要的数据项有无缺失。
- 表单填写时，输入组件设计以用户体验为导向，有更好的操作体验。
- 开发工作相关技术要求请参照 @.cursorrules 中的描述。
- 不在页面设计开发时添加其它功能已有的部分，如需要，通过功能跳转的方式进行。
- 组件尽量使用radix-ui原生组件，必要时可自定义，在 @components 目录下开成有效复用，避免重复定义。非必要不引入其它第三方组件。
- 修改样式时，统一在 @globals.css 中定义类，非必要，不在页面中单独写css样式。
- 逐个实现页面上的交互功能，涉及与后台交互的，都通过模拟接口的方式实现。
- 非必要不要修改 tsconfig.json 中 "target" 的配置。
- 涉及到修改公共组件、项目配置时，请确保不会影响其它功能运行。
- 不同功能的页面布局之间要有不同，不要都是一个模板套娃。
- 请不要考虑测试，先完善功能。
- 有业务上不清楚、不理解，或是有单独设计的额外功能，请与我确认。
```

**AI-Assistant**

```
我已经完成了检疫机构管理的基本功能实现，包括：
页面布局
顶部统计概览
机构列表管理
数据展示
机构基本信息
同步状态
同步历史
功能操作
搜索筛选
同步数据
查看详情
同步历史
删除机构
4. 用户体验
加载状态
操作反馈
数据分页
友好提示
是否需要我继续完善其他功能？比如：
机构详情页面
人员管理功能
业务统计分析
```

